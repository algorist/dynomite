#!/usr/bin/env ruby

require 'optparse'
require 'digest/md5'

ROOT = File.expand_path(File.dirname(__FILE__) + "/..")
COMMAND_DIR = File.join(ROOT, 'rlibs', 'cli')
$:.unshift COMMAND_DIR
COMMANDS = Dir[COMMAND_DIR + "/*.rb"].map { |fname| File.basename(fname).split(".")[0].downcase }

begin
  ARGV[0] ? command = ARGV[0].downcase : (raise "No command provided")
  COMMANDS.include?(command) ? (require command) : (raise "Invalid command")
rescue => error
  puts "#{error.message}! Valid commands for dynomite are:\n#{COMMANDS.sort.join(", ")}"
  puts error.backtrace.join("\n")
  exit(1)
end

